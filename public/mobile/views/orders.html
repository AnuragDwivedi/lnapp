<h2 class="admin-tab-heading">Orders</h2>

<div class="sub-tabs-radio">
    <div class="btn-group radio-tab">
        <label class="btn btn-primary" ng-class="{'active':orderType === 'Online'}">
            <input class="hide-element" type="radio" name="options" ng-model="orderType" value="Online" ng-change="optionChangeHandler('Online')"> Online
        </label>
        <label class="btn btn-primary" ng-class="{'active':orderType === 'Online-retail'}">
            <input class="hide-element" type="radio" name="options" ng-model="orderType" value="Online-retail" ng-change="optionChangeHandler('Online-retail')"> Online - Retail
        </label>
        <label class="btn btn-primary" ng-class="{'active':orderType === 'Retail'}">
            <input class="hide-element" type="radio" name="options" ng-model="orderType" value="Retail" ng-change="optionChangeHandler('Retail')"> Retail
        </label>
    </div>
</div>

<span ng-show="errorMessage.length > 0" class="error-message">{{errorMessage}}</span>

<div class="row filter-panel">
    <div class="col-xs-12 col-sm-3">
        <input type="text" class="form-control" placeholder="Search..." ng-model="searchText">
    </div>
</div>

<div id="orders-accordion">
    <div class="mobile-row" ng-repeat="e in orders | filter:searchText">
        <div class="row margin-top-10">
            <div class="col-xs-10">
                <h4>{{e.user.firstName + ' ' + (e.user.lastName ? e.user.lastName : '')}}</h4>
            </div>
            <div class="col-xs-2">
                <a class="btn btn-link btn-lg align-right" ng-href="tel: {{e.user.mobile}}">
                    <span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>
                </a>
            </div>
        </div>
        <div>
            <span>{{e.pickupDate | date:'MMMM dd, yyyy'}}</span>
            <span class="align-right">{{e.pickupSlot}}</span>
        </div>
        <div class="row margin-top-10">
            <div class="input-group input-group-custom-mobile">
                <span class="input-group-addon">Assigned To</span>
                <select id="assigned-to" class="form-control" ng-model="e.assignedTo" ng-change="assignedToHandler(e)">
                    <option ng-repeat="user in $parent.pdUsers" value="{{user._id}}">{{user.firstName + ' ' + user.lastName}}</option>
                </select>
                <span class="input-group-addon">
                    <a style="padding-top: 4px;" ng-if="!!e.assignedTo" ng-href="tel: {{e.assignedTo.mobile}}">
                        <span class="glyphicon glyphicon-earphone" aria-hidden="true"></span>
                    </a>
                </span>
            </div>
        </div>
        <span ng-if="e.savedSuccess === false" class="error-message">Error assigning order</span>
        <span ng-if="e.savedSuccess === true" class="success-message">Order assigned successfully</span>
    </div>
</div>